# Customization Guide

## 1) Integration data (real HACS data)

Files generated by sync:
- `src/data/hacs/integration-data.json`
- `src/data/hacs/integration-repositories.json`
- `src/data/hacs/last-sync.json`

Update datasets with:

```bash
npm run sync:hacs
```

Note: `npm run build` already runs sync automatically.

## 2) Page layout and content

File: `src/pages/index.astro`

- Hero: headline, copy, CTA, stats
- Sections: featured + catalog
- Catalog controls: search/filter/sort + confidence
- Score explainability block
- Compare drawer + modal
- Minimal script: initialize catalog by importing `initCatalog`
- Category mapping: `toCategory()` function

File: `src/scripts/catalog.ts`
- UI init: `initCatalog()` (DOM wiring, render, load more, reset, presets, compare)
- URL state: sync filters with query params
- Non-blocking rendering with Web Worker + skeleton cards

File: `src/scripts/catalog-core.ts`
- Pure functions: `filterRows`, `sortRows`, `stateToQuery`, `queryToState`, `applyPreset`
- Default sort: `recommended-desc`
- Includes confidence filter state and `reliable` preset

File: `src/scripts/catalog.worker.ts`
- Off-main-thread filter/sort for smoother UX on large datasets

File: `src/lib/score-model.ts`
- Shared score constants and formulas used by data loader + UI
- Percentiles, freshness grace+decay, maintenance signal, final score/confidence

## 3) Integration cards

File: `src/components/IntegrationCard.astro`

- Featured card visual structure
- Key metrics: repo, stars, updated date, domain, confidence
- Inline score help tooltip

## 4) Global SEO

File: `src/layouts/BaseLayout.astro`

- Dynamic title/description
- Open Graph / Twitter
- Canonical

File: `src/pages/index.astro`
- JSON-LD

File: `src/pages/robots.txt.ts`
- Dynamic crawling rules + sitemap URL generation per deployment domain/base path

File: `src/pages/sitemap.xml.ts`
- Sitemap endpoint (includes homepage + dynamic detail pages)

## 5) Design system

File: `src/styles/global.css`

Main points:
- `daisyui` plugin enabled on Tailwind
- Single daisyUI theme `hacs-dark` with color/radius tokens in `@plugin "daisyui/theme"`
- Base typography + gradient background in `@layer base`
- daisyUI components (`btn`, `card`, `input/select`, `badge`, `checkbox`)
- Tailwind utility classes used directly in Astro templates

## 6) Mobile UX

Already included:
- Responsive section and card layouts
- Quick presets and filter reset

Possible extensions:
- Icon-based quick filters
- Sticky action bar for `Reset/Load more`
- Persist filters in query string

## 7) Accessibility

Already included:
- Skip link
- Focus ring
- `aria-live` for results
- Reduced motion support

Possible extensions:
- Full WCAG audit
- Screen reader testing
- Automatic contrast checks in CI

## 8) Tests

Files:
- `src/scripts/catalog.test.ts`
- `src/lib/score-model.test.ts`

Coverage:
- Catalog pure functions and URL state behavior
- Shared score model helpers and formula boundaries
- Run with `npm run test`

## 9) Detail pages

File: `src/pages/integration/[slug].astro`
- Static generation of one page per integration
- Uses real HACS data via `src/data/hacs/load.ts`
- Breakdown values computed with shared score model helpers
